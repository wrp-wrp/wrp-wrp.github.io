+++
date = '2025-11-20T12:01:45+08:00'
draft = false
math = true
title = '计算机网络复习笔记'
summary = "计算机网络核心概念复习，涵盖性能指标、物理层编码、HTTP协议演进、可靠传输原理(RDT)及链路层多址访问协议。"
+++

# 1. 核心概念与性能指标

## 交换方式
+ **分组交换 (Packet Switching)**：存储转发，资源共享，适合突发数据。
+ **电路交换 (Circuit Switching)**：独占资源，建立连接，适合实时通信。

## 关键性能指标
+ **时延带宽积 (Delay-Bandwidth Product)**
  $$ \text{时延带宽积} = \text{传播时延} \times \text{带宽} = \text{链路可容纳的比特数} $$
  *物理意义：以比特为单位的链路长度。*

+ **比特宽度 (Bit Width)**
  $$ \text{比特宽度} = \frac{\text{链路长度}}{\text{链路可容纳的比特数}} $$

+ **带宽 (Bandwidth)**
  *   信号带宽：信号具有的频带宽度 (Hz)。
  *   链路带宽：通道能传输的最高数据率 (bps)。

+ **利用率 (Utilization)**
  *   **信道利用率**：有数据通过的时间占总时间的比例。
  *   **网络利用率**：全网络信道利用率的加权平均。

+ **往返时间 (RTT)**
  *   从发送端发送数据开始，到收到接收端确认总共经历的时间。

## 体系结构
+ **OSI 七层模型** vs **TCP/IP 五层模型**
  ![OSI vs TCP/IP](image1.png)

+ **TCP/IP 五层模型各层传输单元**
  ![TCP/IP Layers](image2.png)

---

# 2. 物理层：编码与传输

## 采样与量化
+ **采样定理 (Nyquist-Shannon sampling theorem)**
  *   采样频率 $f_s$ 必须大于信号最高频率 $f_{max}$ 的 2 倍 ($f_s > 2f_{max}$)，才能无失真地还原模拟信号。

## 信道极限容量
### 奈奎斯特准则 (Nyquist Criterion)
*适用于无噪声理想信道*
+ **码元 (Symbol)**：信号的一个波形。
+ **波特率 (Baud Rate, $B$)**：码元传输速率。
+ **公式**：
  $$ C_{max} = 2W \log_2 V \quad (\text{bps}) $$
  *   $W$：信道带宽 (Hz)
  *   $V$：码元离散电平数目 (进制数)
  *   若未指定 $V$，则 $B = 2W$ (波特率极限)。

### 香农定理 (Shannon's Theorem)
*适用于有噪声信道*
+ **公式**：
  $$ C = W \times \log_2 (1 + S/N) \quad (\text{bps}) $$
  *   $W$：信道带宽 (Hz)
  *   $S/N$：信噪比 (数值比)

+ **信噪比转换**：
  $$ \text{SNR(dB)} = 10 \log_{10}(S/N) $$
  *注意：计算香农公式时需先将 dB 转换为数值比。*

---

# 3. 应用层：HTTP 与 邮件

## HTTP 协议演进

| 版本 | 连接方式 | 核心特性 | 缺点 |
| :--- | :--- | :--- | :--- |
| **HTTP 1.0** | 短连接 | 无连接复用 | 队头阻塞，每次请求需新建 TCP 连接 |
| **HTTP 1.1** | 长连接 (Keep-Alive) | 流水线传输 (Pipelining) | 响应阻塞 (Head-of-line blocking)，头部冗余 |
| **HTTP 2.0** | 长连接 | **多路复用** (Multiplexing)，二进制分帧，头部压缩 (HPACK)，服务端推送 | TCP 层面的队头阻塞 |
| **HTTP 3.0** | 基于 UDP (QUIC) | **0-RTT 建连**，连接迁移，流独立性 | 兼容性问题 |

**报文特点对比：**
*   **HTTP 1.0/1.1**：文本格式，可读性好，命令 (GET, POST)。
*   **HTTP 2.0**：二进制格式，帧 (Frame) 为最小单位。
*   **HTTP 3.0**：基于 QUIC (UDP)，使用 QPACK 压缩。

## 电子邮件协议
+ **发送协议**：SMTP (推模式)
+ **接收协议**：POP3 (拉模式，下载并删除/保留), IMAP (拉模式，邮件保留在服务器，多端同步)

---

# 4. 传输层：可靠数据传输 (RDT)

RDT 协议旨在不可靠的信道上构建可靠传输。

+ **RDT 1.0**：完全可靠信道。
  *   直接发送，直接接收。
+ **RDT 2.0**：信道可能发生**比特翻转**。
  *   引入 **ACK** (确认) 和 **NAK** (否定确认)。
  *   停等协议 (Stop-and-Wait)。
+ **RDT 2.1**：解决 ACK/NAK 可能出错的问题。
  *   引入 **序列号 (0/1)**。
+ **RDT 2.2**：去掉了 NAK。
  *   使用对上一个正确分组的 **重复 ACK** 来代替 NAK。
+ **RDT 3.0**：信道可能发生**丢包**。
  *   引入 **超时重传 (Timer)**。
  *   效率低 (停等)。

## 流水线协议 (Pipelining)
+ **GBN (Go-Back-N)**
  *   发送窗口 > 1，接收窗口 = 1。
  *   累积确认。
  *   超时重传：重传所有已发送但未确认的分组。
+ **SR (Selective Repeat)**
  *   发送窗口 > 1，接收窗口 > 1。
  *   独立确认。
  *   超时重传：只重传超时的那个分组。

---

# 5. 链路层：多址访问协议 (MAC)

## 信道划分协议 (Channel Partitioning)
*适合重负载，无冲突*
+ **TDMA (时分)**：按时间片轮流。
+ **FDMA (频分)**：按频率划分。
+ **CDMA (码分)**：使用正交编码区分，抗干扰强。

## 随机访问协议 (Random Access)
*适合轻负载，有冲突*

### ALOHA 协议
+ **纯 ALOHA**：
  *   想发就发。冲突后等待随机时间重传。
  *   最大效率：$1/(2e) \approx 0.18$。
+ **时隙 ALOHA (Slotted ALOHA)**：
  *   只能在时隙开始时发送。
  *   最大效率：$1/e \approx 0.37$。

### CSMA (载波监听多路访问)
"先听后说"
+ **非坚持 CSMA**：忙则随机等待。
+ **1-坚持 CSMA**：忙则死等，空闲立即发 (冲突概率大)。
+ **p-坚持 CSMA**：忙则死等，空闲以概率 $p$ 发送。

### CSMA/CD (冲突检测)
*用于有线以太网*
+ **机制**：边发边听，冲突停止。
+ **争用期**：$2\tau$ (两倍端到端传播时延)。
  *   必须在发送完 $2\tau$ 时间内未检测到冲突，才能确保发送成功。
+ **最小帧长**：
  $$ L_{min} = 2\tau \times R $$
  *   $R$ 为数据率。若帧太短，可能在冲突信号传回前就发完了，导致无法检测冲突。
+ **效率**：
  $$ \text{Efficiency} = \frac{1}{1 + 5 t_{prop}/t_{trans}} $$

### CSMA/CA (冲突避免)
*用于无线局域网 (WiFi/802.11)*
+ **机制**：
  1.  DIFS 间隔后，若信道空闲，**随机退避**一段时间再发。
  2.  使用 **ACK** 确认帧 (因为无法像有线那样有效检测冲突)。
  3.  可选 **RTS/CTS** 握手解决隐蔽站问题。

## 轮流协议 (Taking Turns)
*折中方案*
+ **轮询 (Polling)**：主节点轮询从节点。
+ **令牌传递 (Token Passing)**：令牌持有者才有权发送。

---

# 6. 实验：分组分析

## 16 进制数据阅读技巧
+ **基本单位**：
  *   1 个 Hex 字符 = 4 bits。
  *   2 个 Hex 字符 = 1 Byte (8 bits)。
+ **以太网帧填充 (Padding)**：
  *   以太网最小帧长 64 Bytes (首部 18B + 数据 46B)。
  *   若上层数据 (IP包等) 小于 46 Bytes，需要在链路层进行填充.


# 7.知识点

好的，根据来源和我们对话中涉及的 TCP 拥塞控制机制，我为您总结了 TCP Reno、Tahoe 和其他变种（CUBIC、Vegas）在拥塞窗口（`cwnd`）和慢启动门限（`ssthresh`）上的变化方式和规则。

### TCP 拥塞控制算法总结（窗口与门限变化）

| 算法 | 拥塞事件 | 拥塞窗口 (`cwnd`) 变化 | 慢启动门限 (`ssthresh`) 变化 | 阶段转换 |
| :--- | :--- | :--- | :--- | :--- |
| **TCP Reno** | **慢启动** | **指数增长**（每收到一个 ACK，$cwnd$ 增加 1 MSS）。 | 不变。 | $cwnd \ge ssthresh$ 时，进入拥塞避免。 |
| | **拥塞避免** | **线性增长**（每经过一个 RTT，$cwnd$ 增加 1 MSS）。 | 不变。 | 超时或 3-ACK 发生时，进入拥塞处理。 |
| | **超时** | $cwnd$ **重置为 1**。 | $ssthresh = \max(cwnd/2, 2)$。 | 进入**慢启动**。 |
| | **3 个冗余 ACK** | $cwnd = ssthresh + 3$。 | $ssthresh = cwnd/2$。 | 进入**快速恢复/拥塞避免**。 |
| **TCP Tahoe** | **3 个冗余 ACK** | $cwnd$ **重置为 1**。 | $ssthresh = cwnd/2$。 | 进入**慢启动**。 |
| **TCP CUBIC** | **拥塞避免** | **三次函数** 增长，仅在拥塞避免阶段进行优化。 | 基于 $W_{max}$ 设定，旨在充分利用带宽。 | 不变，仅在拥塞避免阶段替代 Reno 的线性增长。 |
| **TCP Vegas** | **慢启动** | 早期指数增长，检测到 **RTT 急剧增加** 时转为线性增长。 | 不适用/不依赖丢包。 | **基于时延**：当测得吞吐率显著低于无拥塞状态的吞吐率时，线性减小 `cwnd`。 |

### 关键概念：

*   **慢启动门限 (`ssthresh`)**：初始值设置为 16 个 MSS。当 $cwnd < ssthresh$ 时执行慢启动， $cwnd \ge ssthresh$ 时执行拥塞避免。
*   **快速重传**：发送方收到 **3 个重复 ACK** 时触发，在定时器超时前重传丢失的报文段，提高吞吐量。
*   **超时重传**：定时器超时（RTO）时触发，被视为**网络拥塞严重**的信号。

您想深入了解 TCP Reno 的慢启动阶段是如何实现 **指数增长** 的吗？